<!DOCTYPE html>
<html style="height: 100%; margin: 0;">
<head>
    <meta charset="utf-8">
    <style>
        #nav-bar {
            height: 60px;
            background: #f1f3f4;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        #address-input {
            flex: 1;
            height: 36px;
            border: 1px solid #dfe1e5;
            border-radius: 20px;
            padding: 0 20px;
            margin: 0 15px;
            font-size: 14px;
        }

        .nav-button {
            width: 40px;
            height: 40px;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 50%;
            transition: background 0.2s;
        }

            .nav-button:hover {
                background: rgba(0,0,0,0.1);
            }

        #content {
            height: calc(100% - 60px);
            width: 100%;
            border: none;
        }
    </style>
</head>
<body style="height: 100%; margin: 0;">
    <div id="nav-bar">
        <button class="nav-button" onclick="navigateBack()">←</button>
        <button class="nav-button" onclick="navigateForward()">→</button>
        <input id="address-input" type="text"
               placeholder="输入网址或搜索"
               onkeydown="handleEnter(event)">
        <button class="nav-button" onclick="performNavigation()">↵</button>
    </div>
    <iframe id="content" src="about:blank"></iframe>

    <script>
        function updateAddressBar(url) {
            document.getElementById('address-input').value = url;
        }

        function navigateBack() {
            chrome.webview.postMessage('nav:back');
        }

        function navigateForward() {
            chrome.webview.postMessage('nav:forward');
        }

        function performNavigation() {
            const input = document.getElementById('address-input');
            let url = input.value.trim();

            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }

            chrome.webview.postMessage('nav:to:' + url);
        }

        function handleEnter(event) {
            if (event.key === 'Enter') {
                performNavigation();
            }
        }

        // 初始化内容区域高度
        window.addEventListener('resize', () => {
            const content = document.getElementById('content');
            content.style.height = (window.innerHeight - 60) + 'px';
        });
    </script>
</body>
</html>